[tox]
envlist = lint, type-check
isolated_build = true
skip_missing_interpreters = true

# Note: Main testing is done via 'briefcase dev --test' directly
# Tox is used for code quality checks only

[testenv:lint]
deps =
    ruff>=0.1.0
commands =
    ruff check src tests
    ruff format --check src tests

[testenv:type-check]
deps =
    mypy>=1.0.0
    types-requests
    types-Pillow
commands =
    mypy src/accessiweather/simple --ignore-missing-imports





[coverage:run]
source = src/accessiweather/simple
omit =
    */tests/*
    */test_*
    */__pycache__/*

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:

[flake8]
max-line-length = 100
extend-ignore = E203, W503
exclude = .tox,.git,__pycache__,build,dist,*.egg

[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto
addopts =
    --strict-markers
    --disable-warnings
    --tb=short
markers =
    asyncio: marks tests as async
    slow: marks tests as slow
    integration: marks tests as integration tests
    accessibility: marks tests related to accessibility features
    toga: marks tests specific to Toga framework
    wx_only: marks tests that only run with wxPython (skip in Toga environment)
